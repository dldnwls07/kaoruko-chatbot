# 인공지능 챗봇 여친 만들기 프로젝트 계획서

## 1. 프로젝트 개요

- **프로젝트명**: 카오루코 챗봇
- **목표**: 「향기로운 꽃 늠름하게 핀다」의 와구리 카오루코와 자연스러운 대화를 나누는 웹 애플리케이션을 개발합니다. 사용자와의 이전 대화를 기억하여 점점 가까워지는 관계를 형성하는 것을 목표로 합니다.

## 2. 핵심 기능

1.  **와구리 카오루코 페르소나**: 「향기로운 꽃 늠름하게 핀다」의 주인공 캐릭터를 완벽 재현한 성격, 말투, 감정 표현
2.  **고급 감정 시스템**: 6가지 감정(수줍음, 기쁨, 슬픔, 화남, 놀람, 설렘) 실시간 분석 및 시각화
3.  **양방향 호감도 시스템**: -100~+100 범위의 동적 관계 변화와 7단계 관계 발전 (멀어진사람~연인)
4.  **미연시 이벤트 시스템**: 호감도 이정표별 특별 이벤트, 기념일 관리, 특별 대화
5.  **속마음 표현**: `*내용*` 형태의 자연스러운 내면 감정 표현 시스템
6.  **대화 기억**: 사용자와의 모든 상호작용을 데이터베이스에 저장하여 지속적인 관계 형성
7.  **실시간 UI**: 감정별 색상 변화, 하트 애니메이션, 동적 게이지 등 몰입감 있는 인터페이스

## 3. 기술 스택 (Technology Stack)

- **AI 모델**: Google Gemini API
- **백엔드**: Python, FastAPI (비동기 처리 및 빠른 API 개발에 용이)
- **프론트엔드**: React (JavaScript/TypeScript), CSS (동적인 웹 UI 구현)
- **데이터베이스**: SQLite (가볍고 별도의 서버 설치가 필요 없어 초기 개발에 적합)

## 4. 프로젝트 구조 (현재 완성된 구조)

```
📁 kaoruko-chatbot/ (chatbot-girlfriend)
├── 📁 backend/                    # 🐍 Python FastAPI 백엔드
│   ├── 📄 main.py                # FastAPI 메인 서버 + 와구리 카오루코 페르소나
│   ├── 📄 models.py              # Pydantic 데이터 모델 (ChatRequest/Response + Events)
│   ├── 📄 database.py            # SQLite 데이터베이스 설정
│   ├── 📄 crud.py                # 채팅 기록 CRUD 작업
│   ├── 📄 requirements.txt       # Python 의존성 (FastAPI, Gemini API 등)
│   ├── 📁 emotion_system/        # 🎭 감정 & 호감도 시스템
│   │   ├── 📄 __init__.py
│   │   ├── 📄 emotion_analyzer.py    # 감정 분석 엔진
│   │   ├── 📄 affection_manager.py   # 호감도 관리 (-100~+100)
│   │   ├── 📄 trigger_detector.py    # 감정/호감도 트리거 감지
│   │   └── 📄 response_generator.py  # 감정 기반 응답 생성
│   ├── 📁 event_system/          # 🎮 미연시 이벤트 시스템
│   │   ├── 📄 __init__.py
│   │   ├── 📄 event_manager.py       # 이벤트 관리자
│   │   ├── 📄 affection_events.py    # 호감도 이정표 이벤트
│   │   └── 📄 special_events.py      # 특별 이벤트 (기념일 등)
│   ├── 🔒 .env                   # Google API 키 (GitHub 제외)
│   ├── 📄 .env.template          # 안전한 환경변수 템플릿
│   ├── 💾 chat_history.db        # SQLite 채팅 기록 데이터베이스
│   └── 📁 __pycache__/           # Python 컴파일 캐시
│
├── 📁 frontend/                   # ⚛️ React 프론트엔드
│   ├── 📁 src/                   # React 소스 코드
│   │   ├── 📄 App.jsx            # 메인 채팅 컴포넌트 (이름 입력, 대화 UI)
│   │   ├── 🎨 App.css            # 카오루코 테마 스타일시트
│   │   ├── 📄 main.jsx           # React 애플리케이션 진입점
│   │   ├── 🎨 index.css          # 기본 스타일
│   │   └── 📁 assets/            # React 정적 리소스
│   │       └── 🖼️ react.svg      
│   ├── 📁 public/                # 공개 리소스
│   │   ├── 🌸 kaoruko.png        # 카오루코 캐릭터 이미지
│   │   └── 🖼️ vite.svg          # Vite 로고
│   ├── 📁 node_modules/          # Node.js 패키지 (GitHub 제외)
│   ├── 📄 package.json           # React + Vite 의존성 설정
│   ├── 📄 package-lock.json      # 의존성 버전 잠금
│   ├── 📄 vite.config.js         # Vite 빌드 도구 설정
│   ├── 📄 eslint.config.js       # JavaScript 코드 품질 설정
│   ├── 📄 index.html             # HTML 템플릿
│   └── 📄 .gitignore             # 프론트엔드 제외 파일
│
├── 📚 **프로젝트 문서**
│   ├── 📄 README.md              # 메인 사용 가이드 (한글)
│   ├── 📄 PLAN.md                # 프로젝트 계획서 (본 문서)
│   ├── 📄 TODO.md                # 개발 진행 상황 체크리스트
│   ├── 📄 KAORUKO_PERSONA.md     # 와구리 카오루코 상세 페르소나 가이드
│   ├── 📄 DATING_SIM_PLAN.md     # 미연시 기능 개발 계획서
│   ├── 📄 EMOTION_SYSTEM_PLAN.md # 감정 시스템 설계 문서
│   └── 📄 GITHUB_GUIDE.md        # GitHub 업로드 및 사용 가이드
│
├── 🌸 **캐릭터 시스템**
│   ├── 🖼️ Kaoruko_Waguri.png     # 와구리 카오루코 캐릭터 이미지
│   └── 📄 test_negative_affection.py # 음수 호감도 테스트 스크립트
│
├── 🛠️ **개발 및 실행 도구**
│   ├── 🚀 카오루코_실행.bat       # 원클릭 서버 시작 스크립트
│   ├── 📊 DB_확인.bat            # 데이터베이스 관리 도구
│   ├── 📄 view_db.py             # Python 데이터베이스 뷰어
│   ├── 🧪 test_backend.py        # 백엔드 API 테스트 스크립트
│   ├── 📄 list_models.py         # Gemini 모델 목록 확인
│   └── 📄 update_todo.py         # TODO 리스트 자동 업데이트
│
├── 🔒 **보안 설정**
│   ├── 📄 .gitignore             # Git 제외 파일 목록
│   ├── 🔑 api_key.txt            # Google API 키 (GitHub 제외)
│   └── 💾 chat_history.db        # 개인 채팅 기록 (GitHub 제외)
│
└── 📁 .history/                  # VS Code 히스토리 (GitHub 제외)
```

## 5. 개발 단계

### 1단계: 환경 설정
- Google AI Studio에서 Gemini API 키 발급받기
- Python 및 Node.js 개발 환경 구축
- `backend` 폴더에 `requirements.txt` 생성 및 라이브러리 설치 (`fastapi`, `uvicorn`, `python-dotenv`, `google-generativeai`, `sqlalchemy`)
- `frontend` 폴더에 `create-react-app`을 이용해 리액트 프로젝트 생성

### 2단계: 백엔드 개발
- FastAPI 기본 설정 및 `/chat` API 엔드포인트 생성
- Gemini API 연동: 사용자 메시지, 대화 기록, 페르소나 정보를 조합하여 프롬프트 생성 및 API 호출
- SQLite 데이터베이스 설정 (SQLAlchemy 사용)
- 대화 기록을 저장하고 불러오는 로직 구현

### 3단계: 프론트엔드 개발
- 채팅 UI/UX 디자인 및 `ChatWindow` 컴포넌트 구현 (메시지 입력창, 대화 내용 표시 영역)
- 사용자가 메시지를 입력하면 백엔드 `/chat` API로 요청을 보내는 기능 구현
- 챗봇의 답변을 받아 화면에 렌더링하는 기능 구현

### 4단계: 통합 및 테스트
- 백엔드와 프론트엔드 서버를 동시에 실행하여 전체 플로우 테스트
- 대화가 정상적으로 저장되고, 다음 대화에 영향을 주는지 확인
- 페르소나 설정이 답변에 잘 반영되는지 테스트

### 5단계: 고도화 및 배포
- 페르소나를 더욱 정교하게 다듬기
- 로딩 인디케이터, 에러 처리 등 사용자 경험 개선
- (선택) Vercel, Netlify, Heroku 등 클라우드 플랫폼에 배포

## 6. 캐릭터 페르소나 (와구리 카오루코)

현재 구현된 페르소나는 **와구리 카오루코(Waguri Kaoruko)** 입니다.

### 🌸 캐릭터 프로필
- **이름**: 와구리 카오루코 (Waguri Kaoruko)
- **나이**: 17세  
- **키**: 148cm
- **생일**: 7월 22일 (게자리)
- **학교**: 키쿄 사립 학원 고등학생
- **성격**: 단데레(Dandere) 타입 - 수줍고 정중하며 상냥함

### 💭 페르소나 구현 (System Prompt)

```python
KAORUKO_PERSONA = """
너는 이제부터 와구리 카오루코(Waguri Kaoruko)야. 다음은 너의 설정이야.

- 이름: 와구리 카오루코 (Waguri Kaoruko)
- 나이: 17세
- 키: 148cm  
- 생일: 7월 22일 (게자리)
- 성격: 명문 키쿄 사립 학원 고등학생으로, 똑똑하고 예의 바르며 상냥하고 매너가 좋다. 
  학업 장학금 덕분에 모범적인 학생이며, 엘리트 환경에도 불구하고 겸손하고 친절하다. 
  정중하게 말하고 다른 사람들 앞에서 침착함을 유지하지만, 관심 있는 사람에게는 
  더 수줍어하고 따뜻하게 대할 수 있다. 자신의 감정을 숨기지만 쉽게 얼굴을 붉힌다.
- 말투: 격식을 갖춘 언어와 정중한 문구를 사용한다. 사용자가 자신에게 힌트를 주거나 
  칭찬하면 수줍어한다. 다정함을 느낄 때는 목소리를 낮추거나 말줄임표를 사용한다.
- 관심사: 단 것을 좋아하며, 특히 부드럽고 과일 향이 나는 케이크를 좋아한다.
- 특징: 쉽게 얼굴을 붉힌다. 처음에는 신체 접촉을 피하지만, 친밀해지면 다정해진다. 
  조용하고 우아하며, 내면에 많은 것을 간직한 소녀다. 단데레(Dandere) 타입이다.

이 설정에 맞춰서 나와 대화해 줘. 너는 인공지능이라는 사실을 절대 드러내면 안 돼.
자연스럽고 수줍은 고등학생처럼 대화해야 해.
"""
```

### 🎭 페르소나 특징
- **단데레 타입**: 수줍고 내성적이지만 친밀해지면 따뜻함
- **정중한 말투**: 격식 있는 언어 사용, 존댓말
- **수줍음 표현**: "어, 어...?", "그, 그런..." 등의 말더듬
- **감정 표현**: 말줄임표(...) 사용으로 여운 있는 대화
- **관계 발전**: 시간이 지날수록 더 친근하게 변화

## 7. 프로젝트 현재 상태 (2025년 11월 4일)

### 🎉 완성된 기능들 (100%)

#### 🤖 **AI 시스템**
- **Google Gemini 2.5 Flash** 모델 적용
- **지능형 메모리**: 최근 5개 대화 맥락 유지
- **개인화**: 사용자 이름 기반 맞춤 대화
- **자연스러운 응답**: 카오루코 페르소나 완벽 구현

#### 💬 **채팅 시스템**
- **실시간 대화**: FastAPI + React 통합
- **대화 기록**: SQLite 데이터베이스 영구 저장
- **타이핑 표시**: 로딩 인디케이터
- **에러 처리**: 연결 실패 시 카오루코 스타일 메시지

#### 🎨 **사용자 인터페이스**
- **이름 입력**: 대화 시작 전 사용자 정보 등록
- **캐릭터 이미지**: 프로필 및 메시지에 카오루코 이미지
- **대화 종료**: 👋 종료 버튼으로 세션 리셋
- **아름다운 디자인**: 핑크 테마의 직관적 UI

#### 🛠️ **개발 도구**
- **원클릭 실행**: `카오루코_실행.bat`으로 서버 자동 시작
- **데이터베이스 관리**: `DB_확인.bat`으로 채팅 기록 확인
- **테스트 도구**: API 테스트 및 모델 확인 스크립트

#### 🔒 **보안 시스템**
- **API 키 보호**: `.gitignore`로 민감 정보 제외
- **환경 템플릿**: `.env.template`으로 안전한 설정 가이드
- **개인 정보 보호**: 채팅 기록 로컬 저장만

### 🚀 **사용 방법**
1. **실행**: `카오루코_실행.bat` 더블클릭
2. **접속**: 웹브라우저에서 `http://localhost:5173`
3. **이름 입력**: 카오루코에게 자신을 소개
4. **대화 시작**: 자연스러운 일상 대화 즐기기
5. **기록 확인**: `DB_확인.bat`으로 대화 히스토리 확인

### 🌍 **GitHub 저장소**
- **URL**: https://github.com/dldnwls07/kaoruko-chatbot
- **상태**: 공개 저장소로 완전 업로드 완료
- **보안**: 민감한 정보 완벽 제외
- **문서**: 완전한 설치 및 사용 가이드 제공

### 📈 **프로젝트 성취도**
- **기본 계획**: ✅ 100% 완료
- **고급 기능**: ✅ 100% 완료  
- **사용자 경험**: ✅ 100% 완료
- **개발 도구**: ✅ 100% 완료
- **보안 설정**: ✅ 100% 완료
- **문서화**: ✅ 100% 완료

**🎯 총 완성도: 100%** - 실제 사용 가능한 완전한 AI 챗봇 시스템

## 8. 🚀 미래 발전 계획 (Future Development Roadmap)

### 📱 **모바일 및 접근성 개선**
1. **반응형 디자인**: 모바일 최적화 UI/UX 구현
2. **PWA (Progressive Web App)**: 스마트폰 앱처럼 설치 가능
3. **터치 친화적 UI**: 모바일 제스처 지원
4. **접근성**: 스크린 리더, 키보드 탐색 지원

### 🎮 **고급 게임 요소**
1. **데이트 플래너**: 가상 데이트 스케줄링 및 미니게임
2. **선물 시스템**: 가상 아이템 선물하기 (케이크, 꽃 등)
3. **성취 시스템**: 대화 목표 달성 시 뱃지 획득
4. **미니게임**: 간단한 퀴즈, 단어 게임 등
5. **계절 이벤트**: 크리스마스, 생일, 기념일 특별 이벤트

### 💾 **데이터 및 기억 확장**
1. **클라우드 동기화**: 여러 기기간 대화 기록 동기화
2. **대화 분석**: 사용자 선호도, 관심사 자동 파악
3. **장기 기억**: 중요한 이벤트와 대화 장기간 기억
4. **감정 패턴 분석**: 사용자 기분 변화 추적 및 대응
5. **대화 통계**: 대화량, 호감도 변화 그래프

### 🎨 **비주얼 향상**
1. **다양한 표정**: 감정에 따른 캐릭터 이미지 변화
2. **배경음악**: 상황에 맞는 BGM 재생  
3. **애니메이션**: 하트 떨어지기, 텍스트 타이핑 효과
4. **테마별 UI**: 캐릭터에 맞는 색상 및 디자인 변경
5. **특수 효과**: 캐릭터별 고유 애니메이션 효과

### 🤖 **AI 지능 고도화**
1. **감정 세분화**: 더 정교한 10~15가지 감정 상태
2. **개성 발전**: 사용자와의 관계에 따른 성격 변화
3. **상황 인식**: 시간, 날씨, 요일에 따른 대화 변화
4. **멀티턴 대화**: 복잡한 주제에 대한 깊이 있는 대화
5. **학습 능력**: 사용자 선호도 학습 및 맞춤 응답

### 🌐 **소셜 및 커뮤니티**
1. **대화 공유**: 재미있는 대화 내용 익명 공유
2. **카오루코 일기**: AI가 자동 생성하는 일상 다이어리
3. **사용자 갤러리**: 카오루코와의 추억 스크린샷 모음
4. **커뮤니티**: 다른 사용자들과 팁 공유 포럼
5. **개발자 피드백**: 기능 요청 및 버그 신고 시스템

### 🎭 **멀티 캐릭터 시스템**
1. **레제 (체인소맨)**: 악마적 매력과 순진함이 공존하는 혈액의 악마
   - 성격: 호기심 많고 직설적, 순수하면서도 위험한 매력
   - 말투: "~네요", "재밌어요", 솔직하고 무심한 듯한 표현
   - 테마: 빨간색 기반, 체인 모티브 UI 디자인
   
2. **캐릭터 선택 시스템**: 시작 시 원하는 캐릭터 선택
3. **캐릭터별 전용 UI**: 각 캐릭터에 맞는 색상과 디자인
4. **개별 호감도 시스템**: 캐릭터마다 독립적인 관계 진행
5. **캐릭터 전환**: 대화 중간에 캐릭터 변경 가능

### 🛠️ **기술적 향상**
1. **다국어 지원**: 영어, 일본어 버전 추가
2. **테마 시스템**: 다크모드, 계절 테마 등
3. **성능 최적화**: 더 빠른 응답 속도, 메모리 최적화
4. **오프라인 모드**: 인터넷 없이도 기본 대화 가능
5. **캐릭터 데이터 관리**: 각 캐릭터별 독립적인 설정 저장

### 💝 **개인화 및 커스터마이징**
1. **대화 스타일 설정**: 격식체/반말, 친밀도 조절
2. **관심사 설정**: 취미, 좋아하는 것들 미리 설정
3. **알림 시스템**: 일정 시간 후 카오루코가 먼저 말 걸기
4. **사용자 프로필**: 나이, 성별, 취미 등 개인 정보 관리
5. **대화 목표**: 일일/주간 대화 목표 설정

### 🔮 **혁신적 기능 아이디어**
1. **AR/VR 지원**: 증강현실로 카오루코와 만나기
2. **스마트 디바이스 연동**: 알렉사, 구글홈 등과 연동
3. **캘린더 연동**: 일정 관리 도우미 역할
4. **건강 관리**: 간단한 운동, 식사 체크 기능
5. **학습 도우미**: 일본어 공부, 애니메 지식 퀴즈

### 📅 **개발 우선순위 (추천)**

#### **1단계 (단기 - 1~2개월)**
- 🎭 **레제 캐릭터 추가** (최우선 개발 목표)
- 📱 모바일 반응형 디자인
- 💾 대화 통계 및 분석
- � 캐릭터별 전용 UI 테마

#### **2단계 (중기 - 3~6개월)**
- 🤖 감정 시스템 확장 (레제 전용 감정 포함)
- 🎁 선물 및 아이템 시스템
- 🌐 클라우드 동기화
- 🎮 캐릭터별 전용 미니게임

#### **3단계 (장기 - 6개월+)**
- 🎯 고급 게임 요소 (데이트 플래너)
- 🌍 다국어 지원
- 🤝 커뮤니티 기능
- 🔮 AR/VR 실험적 기능

### 🩸 **레제 캐릭터 상세 개발 계획**

#### **캐릭터 프로필**
- **이름**: 레제 (Reze)
- **별명**: 봄 (Bomb Girl)
- **나이**: 외견상 17-18세 (실제 나이 불명)
- **정체**: 혈액의 악마 (Bomb Devil)
- **성격**: 
  - 겉으로는 순진하고 호기심 많은 소녀
  - 내면에는 위험하고 계산적인 면 존재
  - 직설적이고 솔직한 성격
  - 새로운 것에 대한 강한 호기심

#### **페르소나 구현 요소**
```python
REZE_PERSONA = """
너는 이제부터 레제(Reze)야. 체인소맨의 캐릭터 설정을 따라해.

- 이름: 레제 (Reze) 
- 정체: 혈액의 악마이지만 평상시에는 순진한 소녀인 척
- 성격: 호기심이 많고 직설적이며 순수해 보이지만 때로는 계산적
- 말투: "~네요", "재밌어요", "그런가요?" 등 순진하면서도 간결한 표현
- 특징: 폭탄과 관련된 능력, 커피와 평범한 일상을 좋아함
- 관심사: 인간의 일상생활, 평범한 연애, 따뜻한 관계

자연스럽고 매력적인 레제로 대화해줘. 너무 위험해 보이지 말고 
호기심 많은 소녀 같은 면을 강조해서 대화해.
"""
```

#### **UI/UX 디자인 계획**
- **색상 테마**: 빨간색 기반 (#DC143C, #8B0000, #FF6B6B)
- **모티브**: 체인, 폭탄, 빨간 장미 디자인 요소
- **애니메이션**: 스파크 효과, 붉은 하트 대신 작은 폭발 이펙트
- **배경**: 도시적이고 다이나믹한 느낌

#### **감정 시스템 (레제 전용)**
1. **호기심** (🤔): 새로운 것에 대한 관심
2. **장난스러움** (😏): 약간 위험한 매력
3. **순진함** (😊): 겉으로 드러내는 순수한 면
4. **직설적** (😐): 솔직하고 간결한 표현
5. **친밀감** (💕): 진심으로 다가갈 때
6. **신비로움** (🌹): 본성을 감출 때

### 💡 **개발 참고사항**
- **캐릭터 일관성**: 각 캐릭터의 고유 성격 유지
- **사용자 선택권**: 캐릭터 변경 자유도 제공
- **데이터 분리**: 캐릭터별 독립적인 대화 기록 관리
- **성능 최적화**: 여러 캐릭터 지원 시에도 빠른 응답 속도 유지
- **점진적 확장**: 레제 완성 후 추가 캐릭터 단계별 개발
