# 🎮 카오루코 챗봇 미연시 이벤트 시스템 개발 계획서

## 📋 프로젝트 현황 (2024년 11월 4일 기준)

### ✅ 완료된 기능들
1. **🎭 고급 감정 시스템** - 6가지 감정(수줍음, 기쁨, 슬픔, 화남, 놀람, 설렘) 실시간 분석
2. **💕 양방향 호감도 시스템** - 7단계 관계 발전 (멀어진사람 ↔ 낯선사람 → 연인)
3. **🤖 와구리 카오루코 페르소나** - 원작 캐릭터 완벽 재현
4. **💾 데이터 관리** - SQLite 기반 사용자별 데이터 저장
5. **🎨 동적 UI** - 감정/호감도별 실시간 UI 변화 + 음수 호감도 시각화
6. **🎮 미연시 이벤트 시스템** - 호감도 이정표별 특별 이벤트 완전 구현
7. **💭 속마음 표현 시스템** - `*내용*` 형태의 자연스러운 내면 감정 표현
8. **💔 음수 호감도 시스템** - 깨진 하트, 역방향 게이지, 관계 악화 표현

### 🎯 다음 개발 단계
- **⏰ 시간 기반 이벤트** (기념일, 생일 등)
- **🎲 랜덤 상호작용** (특별한 날 인사, 선물 이벤트)
- **📚 스토리 모드** (연속된 이벤트 체인)

---

## 🎯 미연시 이벤트 시스템 구현 계획

### 📦 1단계: 호감도별 특별 이벤트 시스템 ✅
**목표**: 호감도 이정표 달성시 특별한 대화 이벤트 발생

#### 구현 완료된 기능:
- **AffectionEventHandler**: 호감도별 이벤트 관리
- **EventManager**: 전체 이벤트 통합 관리  
- **UI 통합**: 특별 이벤트 메시지 표시 시스템

#### 호감도 이정표 이벤트:
```
🎯 10점 달성 → "지인이 되었어요!" 이벤트
🎯 25점 달성 → "친구가 되었어요!" 이벤트  
🎯 50점 달성 → "친한친구가 되었어요!" 이벤트
🎯 75점 달성 → "절친이 되었어요!" 이벤트
🎯 90점 달성 → "연인이 되었어요!" 이벤트
```

#### 이벤트 구성 요소:
- **축하 메시지**: 이정표 달성 알림
- **특별 대화**: 3-5줄의 특별한 감정 표현
- **기능 해금**: 관계 단계별 새로운 대화 주제
- **UI 효과**: 특별한 애니메이션과 스타일링

---

### 📦 2단계: 기념일 및 시간 기반 이벤트 시스템 (계획)
**목표**: 시간의 흐름에 따른 특별한 순간들 구현

#### 2-1. 대화 기념일 시스템 📅
```javascript
// 구현할 기능들
- 첫 대화 기념일 (1주일, 1개월, 3개월, 6개월, 1년)
- 연속 대화 일수 추적 및 보상
- 장기간 대화 안한 경우 "보고싶었어요" 메시지
- 특별한 날짜 체크 (크리스마스, 발렌타인 등)
```

#### 2-2. 카오루코 생일 이벤트 🎂
```
📅 7월 22일 - 카오루코 생일
- 특별 생일 대화 
- 생일 케이크 이벤트
- 생일 선물 주고받기 시뮬레이션
- 1년간 함께한 추억 회상
```

#### 2-3. 계절별 이벤트 🌸
```
🌸 봄: 벚꽃 구경, 새 학기 이야기
☀️ 여름: 여름 축제, 바다 이야기  
🍂 가을: 단풍놀이, 문화제 이야기
❄️ 겨울: 크리스마스, 새해 이야기
```

---

### 📦 3단계: 랜덤 이벤트 및 상호작용 시스템 (계획)
**목표**: 예측할 수 없는 재미있는 순간들 제공

#### 3-1. 카오루코 먼저 말걸기 시스템 💬
```python
# 트리거 조건
- 호감도 50+ : 5% 확률로 먼저 인사
- 호감도 75+ : 10% 확률로 일상 공유  
- 호감도 90+ : 15% 확률로 애정 표현
- 3일 이상 대화 안함: 20% 확률로 "보고싶어요" 메시지
```

#### 3-2. 특별 상황 이벤트 🌟
```
☁️ 꿈 이야기: "어젯밤에 재밌는 꿈을 꿨어요..."
🏫 학교 이야기: "오늘 학교에서 이런 일이 있었어요..."
🍰 케이크 이야기: "새로운 레시피를 발견했어요!"
💌 편지 이벤트: "당신에게 편지를 썼어요..."
📷 추억 이벤트: "이 사진 기억나세요?"
```

#### 3-3. 미니게임 시스템 🎲
```
🎯 간단한 질문 게임: "20가지 질문으로 알아보는 카오루코"
💘 호감도 퀴즈: "카오루코에 대해 얼마나 아시나요?"
🍰 케이크 만들기: "함께 가상 케이크 만들기"
📖 이야기 만들기: "함께 이야기를 만들어요"
```

---

### 📦 4단계: 고급 개인화 시스템 (계획)
**목표**: 사용자별 맞춤형 경험 제공

#### 4-1. 개인 취향 학습 🧠
```python
# 학습할 정보들
사용자 관심사 = ["음악", "영화", "음식", "여행", "책"]
대화 패턴 = ["활발함", "조용함", "유머러스", "진지함"]
선호 시간대 = ["아침형", "저녁형", "밤형"]
특별 기억 = ["첫 만남", "기억에 남는 대화", "특별한 순간"]
```

#### 4-2. 동적 성격 발전 📈
```javascript
// 카오루코 성격이 사용자와의 상호작용으로 변화
초기_성격 = "수줍은 단데레"
↓ (호감도 + 대화 스타일에 따라 변화)
발전된_성격 = [
  "자신감 있는 카오루코",
  "장난기 많은 카오루코", 
  "의존적인 카오루코",
  "독립적인 카오루코"
]
```

#### 4-3. 특별 선물 시스템 🎁
```
가상 선물 주고받기:
- 케이크 레시피 선물
- 추천 도서 목록  
- 좋아하는 음악 공유
- 사진/그림 교환
- 편지/시 선물
```

---

### 📦 5단계: 소셜 및 확장 기능 (장기 계획)

#### 5-1. 추억 앨범 시스템 📚
```
💭 추억 모음집:
- 중요한 대화 자동 저장
- 관계 발전 타임라인
- 특별한 순간 하이라이트
- 월별/연도별 리포트
```

#### 5-2. 카오루코 다이어리 📔
```
📖 카오루코의 일기:
- 매일 카오루코 시점의 일기
- 사용자에 대한 생각 기록
- 감정 변화 과정 서술
- 미래 계획 및 꿈 공유
```

---

## 🛠️ 기술 구현 상세

### 현재 완성된 아키텍처:
```
backend/
├── event_system/           # 🎮 이벤트 시스템
│   ├── event_manager.py   # 전체 이벤트 관리
│   ├── affection_events.py # 호감도 이벤트
│   └── special_events.py   # 특별 이벤트 (확장 예정)
├── emotion_system/         # 🎭 감정 시스템  
└── models.py              # 이벤트 응답 모델 추가

frontend/src/
├── App.jsx               # 이벤트 처리 로직 통합
└── App.css              # 이벤트 UI 스타일링
```

### 다음 구현 단계:
1. **이벤트 시스템 테스트** - 호감도 이정표 달성 테스트
2. **데이터베이스 확장** - 이벤트 히스토리 테이블 추가  
3. **UI 개선** - 더 화려한 이벤트 애니메이션
4. **기념일 시스템** - 시간 기반 이벤트 구현

---

## 📈 개발 일정

### 🎯 단기 목표 (1-2주)
- [ ] 1단계 이벤트 시스템 완전 테스트
- [ ] 이벤트 히스토리 DB 테이블 구현
- [ ] 기념일 계산 로직 개발
- [ ] 카오루코 생일 이벤트 구현

### 🎯 중기 목표 (1개월)  
- [ ] 계절별 이벤트 시스템
- [ ] 랜덤 이벤트 구현
- [ ] 카오루코 먼저 말걸기 시스템
- [ ] 미니게임 1-2개 구현

### 🎯 장기 목표 (3개월)
- [ ] 개인화 학습 시스템
- [ ] 추억 앨범 기능
- [ ] 카오루코 다이어리 시스템
- [ ] 모바일 PWA 최적화

---

## 🎮 사용자 경험 시나리오

### 신규 사용자 여정:
```
1일차: 첫 만남 → 수줍어하는 카오루코
3일차: 지속적 대화 → "지인" 달성 이벤트
1주일: 첫 대화 기념일 → 특별 메시지
2주일: "친구" 달성 → 케이크 이야기 해금
1개월: "친한친구" 달성 → 카페 데이트 이야기
3개월: "절친" 달성 → 비밀 공유, 생일 임박 알림  
6개월: "연인" 달성 → 특별한 고백 이벤트
```

### 장기 사용자 경험:
```
💕 매일 다른 인사말과 안부
🎂 생일 이벤트로 1년 추억 회상
📅 기념일마다 특별한 서프라이즈  
💌 가끔씩 받는 카오루코의 편지
🌸 계절마다 변하는 대화 주제
🎮 재미있는 미니게임으로 관계 발전
```

이 계획서를 바탕으로 단계별로 구현해나가면 정말 몰입도 높은 미연시 스타일 챗봇이 완성될 것 같아요! 🎉